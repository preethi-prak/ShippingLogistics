@page
@model STHT.Pages.IndexModel;


@{
    ViewData["Title"] = "Bootstrap Razor Page";
    var shippingPrice = 800;
   
    var bidPrice = 2400;
    var totalPrice = 0;

    if (shippingPrice != 0)
    {
        totalPrice = shippingPrice + bidPrice;
    }
    else
    {
        totalPrice = bidPrice;
    }

    // set shipping to zero if country code doesnt exist . 
}

<div class="container-fluid mt-5">
    <div class="row">
        <div class="col-md-9">
        </div>
        <div class="col-md-1">
                    
                </div>
        <div class="col-md-1">
            <label asp-for="UserLocaleCountry">Country: </label>
            </div>
        <div class="col-md-1">
            <input asp-for="UserLocaleCountry" readonly class="narrow-width"></input>
        </div>
    </div>
    <div class="row gx-5">
        <div class="col-md-8">
            <div class="jumbotron hero-image">
            </div>
        </div>
        <div class="col-md-4">
            <div class="row gx-5">
                <div class="col">
                    <textarea id="BidPriceTextArea" class="form-control" rows="1" readonly>Bid Price: &pound; @bidPrice</textarea>
                </div>
            </div>
            <div class="row gx-5">
                <div class="col">
                    <button id="bidModalBtn" type="button" class="btn btn-primary" data-toggle="modal" data-target="#bidModal">Place Bid</button>
                </div>
            </div>
            <div class="row gx-5">
                <div class="col-md-12">
                    <label>
                        <strong>Shipping Option </strong>
                    </label>
                </div>
            </div>
            <!-- Change component based on the shipping option -->
            @if (shippingPrice != 0)
            {
            <div class="row gx-5">
                <div class="col-md-8">
                    <label for="deliverToYard">Delivery to your Yard:</label>
                </div>
                <div class="col-md-4">
                     <label  id="deliverToYard"  name="deliverToYard" >&pound;@shippingPrice </label>

                </div>

            </div>
            } else
            {
            <!-- if shippingPrice == 0 --> 
            <div class="row gx-5">
                <div class="col-md-8">
                    <label for="ownTransportLabel">Own Transport:</label>
                </div>
                <div class="col-md-4">
                <label  id="ownTransportLabel"  name="ownTransportLabel" >&pound;@shippingPrice </label>

                </div>
            </div>
            }
            
            <div class="row gx-5">
                <div class="col-md-8"></div>
                <div class="col-md-4">
                    <a href="#" id="shippingModalLink" data-toggle="modal" data-target="#shippingModal">Update</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bid Modal -->
<div class="modal fade" id="bidModal" tabindex="-1" role="dialog" aria-labelledby="bidModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bidModalLabel">Place Bid</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row gx-5">
                    <div class="col-md-4">
                        <label for="tractorPriceLabel">Tractor Price: </label>
                    </div>
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-4">
                        <label id="tractorPriceLabel" name="tractorPriceLabel">&pound; @bidPrice</label>
                    </div>
                </div>
                <div class="row gx-5">
                    <div class="col-md-12">
                        @Html.Partial("Shared/_ShippingPartialView.cshtml")
                    </div>
                </div>
                <div class="row gx-5">
                    <div class="col-md-4">
                        <label for="totalPriceLabel">Total Price : </label>
                    </div>
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-4">
                        <label id="totalPriceLabel" name="totalPriceLabel">&pound; @totalPrice</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
             <button type="button" class="btn btn-primary" id="confirmBtn">Confirm</button>
              <button type="button" class="btn btn-secondary close" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<!-- Shipping Modal -->
<div class="modal fade" id="shippingModal" tabindex="-1" role="dialog" aria-labelledby="shippingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="shippingModalLabel">Shipping</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">@Html.Partial("Shared/_ShippingPartialView.cshtml")
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Update changes</button>
                <button type="button" class="btn btn-secondary close" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>